(this["webpackJsonplive-tracker"]=this["webpackJsonplive-tracker"]||[]).push([[0],{29:function(e,t,n){e.exports=n(51)},34:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(23),o=n.n(i),c=(n(34),n(7)),l=n(24),u=(n(35),n(9)),s=n(28),d=n(5),v=(n(48),n(14)),m=n(15);function p(){var e=Object(v.a)(["\n  color: ",";\n"]);return p=function(){return e},e}function f(){var e=Object(v.a)(["\n  width: 5px;\n  background-color: ",";\n  align-self: stretch;\n  margin: 0 10px;\n"]);return f=function(){return e},e}var y=m.a.div(f(),(function(e){return e.isStationPassed?"black":"grey"})),h=m.a.div(p(),(function(e){return e.isNotStation?"grey":"black"})),b=function(e){var t=e.station,n=e.isStationPassed,a=e.isNotStation,i=e.isFirstStation,o=e.isLastStation,c=e.arrivalTime,l=e.departureTime;return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{width:"42px",padding:"5px 0"}},i?null:r.a.createElement("div",null,c),o?null:r.a.createElement("div",null,l)),r.a.createElement(y,{isStationPassed:n}),r.a.createElement(h,{isNotStation:a},t.stationName))};function g(){var e=Object(v.a)(["\n  height: 100%;\n  padding: 10px;\n  overflow: auto;\n"]);return g=function(){return e},e}var E=m.a.div(g()),S=function(e){return!e.arrivalTime&&!e.departureTime},j=function(e,t){var n=e.departureTime||e.arrivalTime||0,a=e.departureDelay||e.arrivalDelay||0;return!S(e)&&n+a<=t},w=function(e){var t=e.vehicle,n=e.trackerLayer;return r.a.createElement(E,null,r.a.createElement("div",null,t.destination),r.a.createElement("div",null,t.longName),r.a.createElement("div",{style:{marginTop:"20px"}},t.stations.map((function(e,a){return r.a.createElement(b,{key:e.stationId,station:e,isStationPassed:j(e,n.currTime),isNotStation:S(e),isFirstStation:0===a,isLastStation:a===t.stations.length-1,arrivalTime:Object(u.b)(e.arrivalTime),departureTime:Object(u.b)(e.departureTime)})}))))},k=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(null),v=Object(c.a)(o,2),m=v[0],p=v[1],f=Object(a.useRef)(m),y=function(e){f.current=e,p(e)};return Object(a.useEffect)((function(){var e="5cc87b12d7c5370001c1d655dc2238655d5c4099bbbadfd75f44cb34",t=new l.Map({container:"map",style:"https://maps.geops.io/styles/travic/style.json?key=".concat(e),center:Object(d.e)([831634,5933959]),zoom:12}),n=new s.a({url:"https://api.geops.io/tracker/v1",apiKey:e});n.onClick((function(e){var a;t.getSource("route")&&(t.removeLayer("route"),t.removeSource("route")),(null===f||void 0===f||null===(a=f.current)||void 0===a?void 0:a.id)!==(null===e||void 0===e?void 0:e.id)&&e?(y(e),n.api.fetchTrajectoryById(n.getParams({id:n.journeyId,time:Object(u.c)(new Date)})).then((function(n){var a=n.p,r=[];a.forEach((function(e){e.forEach((function(e){r.push(Object(d.f)([e.x,e.y],"EPSG:3857","EPSG:4326"))}))})),t.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:r}}}),t.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":e.backgroundColor?e.backgroundColor:"#888","line-width":5}})}))):y(null)})),i(n),t.on("load",(function(){n.init(t,"waterway-name")}))}),[]),r.a.createElement("div",{style:{display:"flex",height:"100vh",width:"100vw"}},m?r.a.createElement(w,{trackerLayer:n,vehicle:m}):null,r.a.createElement("div",{id:"map",style:{flex:1},tabIndex:0}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.1bfb0c73.chunk.js.map